/*
Mithril v0.2.0
http://github.com/lhorie/mithril.js
(c) Leo Horie
License: MIT
*/
var m=function t(e,r){function n(t){O=t.document,M=t.location,H=t.cancelAnimationFrame||t.clearTimeout,T=t.requestAnimationFrame||t.setTimeout}function o(){var t,e=[].slice.call(arguments),r=!(null==e[1]||I.call(e[1])!==q||"tag"in e[1]||"view"in e[1]||"subtree"in e[1]),n=r?e[1]:{},o="class"in n?"class":"className",s={tag:"div",attrs:{}},a=[];if(I.call(e[0])!=D)throw new Error("selector in m(selector, attrs, children) should be a string");for(;t=U.exec(e[0]);)if(""===t[1]&&t[2])s.tag=t[2];else if("#"===t[1])s.attrs.id=t[2];else if("."===t[1])a.push(t[2]);else if("["===t[3][0]){var i=B.exec(t[3]);s.attrs[i[1]]=i[3]||(i[2]?"":!0)}var l=e.slice(r?2:1);s.children=1===l.length&&I.call(l[0])===R?l[0]:l;for(var c in n)n.hasOwnProperty(c)&&(c===o&&null!=n[c]&&""!==n[c]?(a.push(n[c]),s.attrs[c]=""):s.attrs[c]=n[c]);return a.length>0&&(s.attrs[o]=a.join(" ")),s}function s(t,e,n,c,u,f,d,p,g,v,m){try{(null==u||null==u.toString())&&(u="")}catch(y){u=""}if("retain"===u.subtree)return f;var w=I.call(f),b=I.call(u);if(null==f||w!==b){if(null!=f)if(n&&n.nodes){var x=p-c,k=x+(b===R?u:f.nodes).length;l(n.nodes.slice(x,k),n.slice(x,k))}else f.nodes&&l(f.nodes,f);f=new u.constructor,f.tag&&(f={}),f.nodes=[]}if(b===R){for(var C=0,j=u.length;j>C;C++)I.call(u[C])===R&&(u=u.concat.apply([],u),C--,j=u.length);for(var E=[],S=f.length===u.length,A=0,N=1,M=2,T=3,H={},U=!1,C=0;C<f.length;C++)f[C]&&f[C].attrs&&null!=f[C].attrs.key&&(U=!0,H[f[C].attrs.key]={action:N,index:C});for(var B=0,C=0,j=u.length;j>C;C++)if(u[C]&&u[C].attrs&&null!=u[C].attrs.key){for(var P=0,j=u.length;j>P;P++)u[P]&&u[P].attrs&&null==u[P].attrs.key&&(u[P].attrs.key="__mithril__"+B++);break}if(U){var z=!1;if(u.length!=f.length)z=!0;else for(var G,J,C=0;G=f[C],J=u[C];C++)if(G.attrs&&J.attrs&&G.attrs.key!=J.attrs.key){z=!0;break}if(z){for(var C=0,j=u.length;j>C;C++)if(u[C]&&u[C].attrs&&null!=u[C].attrs.key){var K=u[C].attrs.key;H[K]=H[K]?{action:T,index:C,from:H[K].index,element:f.nodes[H[K].index]||O.createElement("div")}:{action:M,index:C}}var _=[];for(var F in H)_.push(H[F]);var Q=_.sort(a),V=new Array(f.length);V.nodes=f.nodes.slice();for(var X,C=0;X=Q[C];C++){if(X.action===N&&(l(f[X.index].nodes,f[X.index]),V.splice(X.index,1)),X.action===M){var Y=O.createElement("div");Y.key=u[X.index].attrs.key,t.insertBefore(Y,t.childNodes[X.index]||null),V.splice(X.index,0,{attrs:{key:u[X.index].attrs.key},nodes:[Y]}),V.nodes[X.index]=Y}X.action===T&&(t.childNodes[X.index]!==X.element&&null!==X.element&&t.insertBefore(X.element,t.childNodes[X.index]||null),V[X.index]=f[X.from],V.nodes[X.index]=X.element)}f=V}}for(var C=0,Z=0,j=u.length;j>C;C++){var et=s(t,e,f,p,u[C],f[Z],d,p+A||A,g,v,m);et!==r&&(et.nodes.intact||(S=!1),A+=et.$trusted?(et.match(/<[^\/]|\>\s*[^<]/g)||[0]).length:I.call(et)===R?et.length:1,f[Z++]=et)}if(!S){for(var C=0,j=u.length;j>C;C++)null!=f[C]&&E.push.apply(E,f[C].nodes);for(var rt,C=0;rt=f.nodes[C];C++)null!=rt.parentNode&&E.indexOf(rt)<0&&l([rt],[f[C]]);u.length<f.length&&(f.length=u.length),f.nodes=E}}else if(null!=u&&b===q){for(var ot=[],st=[];u.view;){var at=u.view.$original||u.view,it="diff"==o.redraw.strategy()&&f.views?f.views.indexOf(at):-1,lt=it>-1?f.controllers[it]:new(u.controller||L),K=u&&u.attrs&&u.attrs.key;if(u=0==nt||f&&f.controllers&&f.controllers.indexOf(lt)>-1?u.view(lt):{tag:"placeholder"},"retain"===u.subtree)return f;K&&(u.attrs||(u.attrs={}),u.attrs.key=K),lt.onunload&&tt.push({controller:lt,handler:lt.onunload}),ot.push(at),st.push(lt)}if(!u.tag&&st.length)throw new Error("Component template must return a virtual element, not an array, string, etc.");u.attrs||(u.attrs={}),f.attrs||(f.attrs={});var ct=Object.keys(u.attrs),ht=ct.length>("key"in u.attrs?1:0);if((u.tag!=f.tag||ct.sort().join()!=Object.keys(f.attrs).sort().join()||u.attrs.id!=f.attrs.id||u.attrs.key!=f.attrs.key||"all"==o.redraw.strategy()&&(!f.configContext||f.configContext.retain!==!0)||"diff"==o.redraw.strategy()&&f.configContext&&f.configContext.retain===!1)&&(f.nodes.length&&l(f.nodes),f.configContext&&typeof f.configContext.onunload===W&&f.configContext.onunload(),f.controllers))for(var lt,C=0;lt=f.controllers[C];C++)typeof lt.onunload===W&&lt.onunload({preventDefault:L});if(I.call(u.tag)!=D)return;var rt,ut=0===f.nodes.length;if(u.attrs.xmlns?v=u.attrs.xmlns:"svg"===u.tag?v="http://www.w3.org/2000/svg":"math"===u.tag&&(v="http://www.w3.org/1998/Math/MathML"),ut){if(rt=u.attrs.is?v===r?O.createElement(u.tag,u.attrs.is):O.createElementNS(v,u.tag,u.attrs.is):v===r?O.createElement(u.tag):O.createElementNS(v,u.tag),f={tag:u.tag,attrs:ht?i(rt,u.tag,u.attrs,{},v):u.attrs,children:null!=u.children&&u.children.length>0?s(rt,u.tag,r,r,u.children,f.children,!0,0,u.attrs.contenteditable?rt:g,v,m):u.children,nodes:[rt]},st.length){f.views=ot,f.controllers=st;for(var lt,C=0;lt=st[C];C++)if(lt.onunload&&lt.onunload.$old&&(lt.onunload=lt.onunload.$old),nt&&lt.onunload){var ft=lt.onunload;lt.onunload=L,lt.onunload.$old=ft}}f.children&&!f.children.nodes&&(f.children.nodes=[]),"select"===u.tag&&"value"in u.attrs&&i(rt,u.tag,{value:u.attrs.value},{},v),t.insertBefore(rt,t.childNodes[p]||null)}else rt=f.nodes[0],ht&&i(rt,u.tag,u.attrs,f.attrs,v),f.children=s(rt,u.tag,r,r,u.children,f.children,!1,0,u.attrs.contenteditable?rt:g,v,m),f.nodes.intact=!0,st.length&&(f.views=ot,f.controllers=st),d===!0&&null!=rt&&t.insertBefore(rt,t.childNodes[p]||null);if(typeof u.attrs.config===W){var dt=f.configContext=f.configContext||{},pt=function(t,e){return function(){return t.attrs.config.apply(t,e)}};m.push(pt(u,[rt,!ut,dt,f]))}}else if(typeof u!=W){var E;0===f.nodes.length?(u.$trusted?E=h(t,p,u):(E=[O.createTextNode(u)],t.nodeName.match($)||t.insertBefore(E[0],t.childNodes[p]||null)),f="string number boolean".indexOf(typeof u)>-1?new u.constructor(u):u,f.nodes=E):f.valueOf()!==u.valueOf()||d===!0?(E=f.nodes,g&&g===O.activeElement||(u.$trusted?(l(E,f),E=h(t,p,u)):"textarea"===e?t.value=u:g?g.innerHTML=u:((1===E[0].nodeType||E.length>1)&&(l(f.nodes,f),E=[O.createTextNode(u)]),t.insertBefore(E[0],t.childNodes[p]||null),E[0].nodeValue=u)),f=new u.constructor(u),f.nodes=E):f.nodes.intact=!0}return f}function a(t,e){return t.action-e.action||t.index-e.index}function i(t,e,r,n,o){for(var s in r){var a=r[s],i=n[s];if(s in n&&i===a)"value"===s&&"input"===e&&t.value!=a&&(t.value=a);else{n[s]=a;try{if("config"===s||"key"==s)continue;if(typeof a===W&&0===s.indexOf("on"))t[s]=u(a,t);else if("style"===s&&null!=a&&I.call(a)===q){for(var l in a)(null==i||i[l]!==a[l])&&(t.style[l]=a[l]);for(var l in i)l in a||(t.style[l]="")}else null!=o?"href"===s?t.setAttributeNS("http://www.w3.org/1999/xlink","href",a):"className"===s?t.setAttribute("class",a):t.setAttribute(s,a):s in t&&"list"!==s&&"style"!==s&&"form"!==s&&"type"!==s&&"width"!==s&&"height"!==s?("input"!==e||t[s]!==a)&&(t[s]=a):t.setAttribute(s,a)}catch(c){if(c.message.indexOf("Invalid argument")<0)throw c}}}return n}function l(t,e){for(var r=t.length-1;r>-1;r--)if(t[r]&&t[r].parentNode){try{t[r].parentNode.removeChild(t[r])}catch(n){}e=[].concat(e),e[r]&&c(e[r])}0!=t.length&&(t.length=0)}function c(t){if(t.configContext&&typeof t.configContext.onunload===W&&(t.configContext.onunload(),t.configContext.onunload=null),t.controllers)for(var e,r=0;e=t.controllers[r];r++)typeof e.onunload===W&&e.onunload({preventDefault:L});if(t.children)if(I.call(t.children)===R)for(var n,r=0;n=t.children[r];r++)c(n);else t.children.tag&&c(t.children)}function h(t,e,r){var n=t.childNodes[e];if(n){var o=1!=n.nodeType,s=O.createElement("span");o?(t.insertBefore(s,n||null),s.insertAdjacentHTML("beforebegin",r),t.removeChild(s)):n.insertAdjacentHTML("beforebegin",r)}else t.insertAdjacentHTML("beforeend",r);for(var a=[];t.childNodes[e]!==n;)a.push(t.childNodes[e]),e++;return a}function u(t,e){return function(r){r=r||event,o.redraw.strategy("diff"),o.startComputation();try{return t.call(e,r)}finally{ot()}}}function f(t){var e=G.indexOf(t);return 0>e?G.push(t)-1:e}function d(t){var e=function(){return arguments.length&&(t=arguments[0]),t};return e.toJSON=function(){return t},e}function p(t,e){var r=function(){return(t.controller||L).apply(this,e)||this},n=function(r){return arguments.length>1&&(e=e.concat([].slice.call(arguments,1))),t.view.apply(t,e?[r].concat(e):[r])};n.$original=t.view;var o={controller:r,view:n};return e[0]&&null!=e[0].key&&(o.attrs={key:e[0].key}),o}function g(){Y&&(Y(),Y=null);for(var t,e=0;t=_[e];e++)if(Q[e]){var r=F[e].controller&&F[e].controller.$$args?[Q[e]].concat(F[e].controller.$$args):[Q[e]];o.render(t,F[e].view?F[e].view(Q[e],r):"")}Z&&(Z(),Z=null),V=null,X=new Date,o.redraw.strategy("diff")}function v(t){return t.slice(it[o.route.mode].length)}function m(t,e,r){st={};var n=r.indexOf("?");-1!==n&&(st=x(r.substr(n+1,r.length)),r=r.substr(0,n));var s=Object.keys(e),a=s.indexOf(r);if(-1!==a)return o.mount(t,e[s[a]]),!0;for(var i in e){if(i===r)return o.mount(t,e[i]),!0;var l=new RegExp("^"+i.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(l.test(r))return r.replace(l,function(){for(var r=i.match(/:[^\/]+/g)||[],n=[].slice.call(arguments,1,-2),s=0,a=r.length;a>s;s++)st[r[s].replace(/:|\./g,"")]=decodeURIComponent(n[s]);o.mount(t,e[i])}),!0}}function y(t){if(t=t||event,!t.ctrlKey&&!t.metaKey&&2!==t.which){t.preventDefault?t.preventDefault():t.returnValue=!1;for(var e=t.currentTarget||t.srcElement,r="pathname"===o.route.mode&&e.search?x(e.search.slice(1)):{};e&&"A"!=e.nodeName.toUpperCase();)e=e.parentNode;o.route(e[o.route.mode].slice(it[o.route.mode].length),r)}}function w(){"hash"!=o.route.mode&&M.hash?M.hash=M.hash:e.scrollTo(0,0)}function b(t,e){var n={},o=[];for(var s in t){var a=e?e+"["+s+"]":s,i=t[s],l=I.call(i),c=null===i?encodeURIComponent(a):l===q?b(i,a):l===R?i.reduce(function(t,e){return n[a]||(n[a]={}),n[a][e]?t:(n[a][e]=!0,t.concat(encodeURIComponent(a)+"="+encodeURIComponent(e)))},[]).join("&"):encodeURIComponent(a)+"="+encodeURIComponent(i);i!==r&&o.push(c)}return o.join("&")}function x(t){"?"===t.charAt(0)&&(t=t.substring(1));for(var e=t.split("&"),r={},n=0,o=e.length;o>n;n++){var s=e[n].split("="),a=decodeURIComponent(s[0]),i=2==s.length?decodeURIComponent(s[1]):null;null!=r[a]?(I.call(r[a])!==R&&(r[a]=[r[a]]),r[a].push(i)):r[a]=i}return r}function k(t){var e=f(t);l(t.childNodes,J[e]),J[e]=r}function C(t,e){var r=o.prop(e);return t.then(r),r.then=function(r,n){return C(t.then(r,n),e)},r}function j(t,e){function r(t){u=t||c,d.map(function(t){u===l&&t.resolve(f)||t.reject(f)})}function n(t,e,r,n){if((null!=f&&I.call(f)===q||typeof f===W)&&typeof t===W)try{var s=0;t.call(f,function(t){s++||(f=t,e())},function(t){s++||(f=t,r())})}catch(a){o.deferred.onerror(a),f=a,r()}else n()}function s(){var c;try{c=f&&f.then}catch(d){return o.deferred.onerror(d),f=d,u=i,s()}n(c,function(){u=a,s()},function(){u=i,s()},function(){try{u===a&&typeof t===W?f=t(f):u===i&&"function"==typeof e&&(f=e(f),u=a)}catch(s){return o.deferred.onerror(s),f=s,r()}f===h?(f=TypeError(),r()):n(c,function(){r(l)},r,function(){r(u===a&&l)})})}var a=1,i=2,l=3,c=4,h=this,u=0,f=0,d=[];h.promise={},h.resolve=function(t){return u||(f=t,u=a,s()),this},h.reject=function(t){return u||(f=t,u=i,s()),this},h.promise.then=function(t,e){var r=new j(t,e);return u===l?r.resolve(f):u===c?r.reject(f):d.push(r),r.promise}}function E(t){return t}function S(t){if(!t.dataType||"jsonp"!==t.dataType.toLowerCase()){var n=new e.XMLHttpRequest;if(n.open(t.method,t.url,!0,t.user,t.password),n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300?t.onload({type:"load",target:n}):t.onerror({type:"error",target:n}))},t.serialize===JSON.stringify&&t.data&&"GET"!==t.method&&n.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.deserialize===JSON.parse&&n.setRequestHeader("Accept","application/json, text/*"),typeof t.config===W){var o=t.config(n,t);null!=o&&(n=o)}var s="GET"!==t.method&&t.data?t.data:"";if(s&&I.call(s)!=D&&s.constructor!=e.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";return n.send(s),n}var a="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),i=O.createElement("script");e[a]=function(n){i.parentNode.removeChild(i),t.onload({type:"load",target:{responseText:n}}),e[a]=r},i.onerror=function(){return i.parentNode.removeChild(i),t.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),e[a]=r,!1},i.onload=function(){return!1},i.src=t.url+(t.url.indexOf("?")>0?"&":"?")+(t.callbackKey?t.callbackKey:"callback")+"="+a+"&"+b(t.data||{}),O.body.appendChild(i)}function A(t,e,r){if("GET"===t.method&&"jsonp"!=t.dataType){var n=t.url.indexOf("?")<0?"?":"&",o=b(e);t.url=t.url+(o?n+o:"")}else t.data=r(e);return t}function N(t,e){var r=t.match(/:[a-z]\w+/gi);if(r&&e)for(var n=0;n<r.length;n++){var o=r[n].slice(1);t=t.replace(r[n],e[o]),delete e[o]}return t}var O,M,T,H,q="[object Object]",R="[object Array]",D="[object String]",W="function",I={}.toString,U=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,B=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,$=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,L=function(){};n(e);var P,z={appendChild:function(t){P===r&&(P=O.createElement("html")),O.documentElement&&O.documentElement!==t?O.replaceChild(t,O.documentElement):O.appendChild(t),this.childNodes=O.childNodes},insertBefore:function(t){this.appendChild(t)},childNodes:[]},G=[],J={};o.render=function(t,e,n){var o=[];if(!t)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var a=f(t),i=t===O,c=i||t===O.documentElement?z:t;i&&"html"!=e.tag&&(e={tag:"html",attrs:{},children:e}),J[a]===r&&l(c.childNodes),n===!0&&k(t),J[a]=s(c,null,r,r,e,J[a],!1,0,null,r,o);for(var h=0,u=o.length;u>h;h++)o[h]()},o.trust=function(t){return t=new String(t),t.$trusted=!0,t},o.prop=function(t){return(null!=t&&I.call(t)===q||typeof t===W)&&typeof t.then===W?C(t):d(t)};var K,_=[],F=[],Q=[],V=null,X=0,Y=null,Z=null,tt=[],et=16;o.component=function(t){return p(t,[].slice.call(arguments,1))},o.mount=o.module=function(t,e){if(!t)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var r=_.indexOf(t);0>r&&(r=_.length);for(var n,s=!1,a={preventDefault:function(){s=!0,Y=Z=null}},i=0;n=tt[i];i++)n.handler.call(n.controller,a),n.controller.onunload=null;if(s)for(var n,i=0;n=tt[i];i++)n.controller.onunload=n.handler;else tt=[];if(Q[r]&&typeof Q[r].onunload===W&&Q[r].onunload(a),!s){o.redraw.strategy("all"),o.startComputation(),_[r]=t,arguments.length>2&&(e=subcomponent(e,[].slice.call(arguments,2)));var l=K=e=e||{controller:function(){}},c=e.controller||L,h=new c;return l===K&&(Q[r]=h,F[r]=e),ot(),Q[r]}};var rt=!1;o.redraw=function(t){rt||(rt=!0,V&&t!==!0?(T===e.requestAnimationFrame||new Date-X>et)&&(V>0&&H(V),V=T(g,et)):(g(),V=T(function(){V=null},et)),rt=!1)},o.redraw.strategy=o.prop();var nt=0;o.startComputation=function(){nt++},o.endComputation=function(){nt=Math.max(nt-1,0),0===nt&&o.redraw()};var ot=function(){"none"==o.redraw.strategy()?(nt--,o.redraw.strategy("diff")):o.endComputation()};o.withAttr=function(t,e){return function(r){r=r||event;var n=r.currentTarget||this;e(t in n?n[t]:n.getAttribute(t))}};var st,at,it={pathname:"",hash:"#",search:"?"},lt=L,ct=!1;return o.route=function(){if(0===arguments.length)return at;if(3===arguments.length&&I.call(arguments[1])===D){var t=arguments[0],r=arguments[1],n=arguments[2];lt=function(e){var s=at=v(e);if(!m(t,n,s)){if(ct)throw new Error("Ensure the default route matches one of the routes defined in m.route");ct=!0,o.route(r,!0),ct=!1}};var s="hash"===o.route.mode?"onhashchange":"onpopstate";e[s]=function(){var t=M[o.route.mode];"pathname"===o.route.mode&&(t+=M.search),at!=v(t)&&lt(t)},Y=w,e[s]()}else if(arguments[0].addEventListener||arguments[0].attachEvent){var a=arguments[0],i=(arguments[1],arguments[2],arguments[3]);a.href=("pathname"!==o.route.mode?M.pathname:"")+it[o.route.mode]+i.attrs.href,a.addEventListener?(a.removeEventListener("click",y),a.addEventListener("click",y)):(a.detachEvent("onclick",y),a.attachEvent("onclick",y))}else if(I.call(arguments[0])===D){var l=at;at=arguments[0];var c=arguments[1]||{},h=at.indexOf("?"),u=h>-1?x(at.slice(h+1)):{};for(var f in c)u[f]=c[f];var d=b(u),p=h>-1?at.slice(0,h):at;d&&(at=p+(-1===p.indexOf("?")?"?":"&")+d);var g=(3===arguments.length?arguments[2]:arguments[1])===!0||l===arguments[0];e.history.pushState?(Y=w,Z=function(){e.history[g?"replaceState":"pushState"](null,O.title,it[o.route.mode]+at)},lt(it[o.route.mode]+at)):(M[o.route.mode]=at,lt(it[o.route.mode]+at))}},o.route.param=function(t){if(!st)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return st[t]},o.route.mode="search",o.route.buildQueryString=b,o.route.parseQueryString=x,o.deferred=function(){var t=new j;return t.promise=C(t.promise),t},o.deferred.onerror=function(t){if("[object Error]"===I.call(t)&&!t.constructor.toString().match(/ Error/))throw t},o.sync=function(t){function e(t,e){return function(o){return a[t]=o,e||(r="reject"),0===--s&&(n.promise(a),n[r](a)),o}}var r="resolve",n=o.deferred(),s=t.length,a=new Array(s);if(t.length>0)for(var i=0;i<t.length;i++)t[i].then(e(i,!0),e(i,!1));else n.resolve([]);return n.promise},o.request=function(t){t.background!==!0&&o.startComputation();var e=new j,r=t.dataType&&"jsonp"===t.dataType.toLowerCase(),n=t.serialize=r?E:t.serialize||JSON.stringify,s=t.deserialize=r?E:t.deserialize||JSON.parse,a=r?function(t){return t.responseText}:t.extract||function(t){return 0===t.responseText.length&&s===JSON.parse?null:t.responseText};return t.method=(t.method||"GET").toUpperCase(),t.url=N(t.url,t.data),t=A(t,t.data,n),t.onload=t.onerror=function(r){try{r=r||event;var n=("load"===r.type?t.unwrapSuccess:t.unwrapError)||E,i=n(s(a(r.target,t)),r.target);if("load"===r.type)if(I.call(i)===R&&t.type)for(var l=0;l<i.length;l++)i[l]=new t.type(i[l]);else t.type&&(i=new t.type(i));e["load"===r.type?"resolve":"reject"](i)}catch(r){o.deferred.onerror(r),e.reject(r)}t.background!==!0&&o.endComputation()},S(t),e.promise=C(e.promise,t.initialValue),e.promise},o.deps=function(t){return n(e=t||e),e},o.deps.factory=t,o}("undefined"!=typeof window?window:{});"undefined"!=typeof module&&null!==module&&module.exports?module.exports=m:"function"==typeof define&&define.amd&&define(function(){return m}),!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.GeoPattern=t()}}(function(){return function t(e,r,n){function o(a,i){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!i&&l)return l(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e){e.exports=t("./lib/")},{"./lib/":3}],2:[function(t,e){"use strict";function r(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,r,n){return e+e+r+r+n+n});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}function n(t){return"#"+["r","g","b"].map(function(e){return("0"+t[e].toString(16)).slice(-2)}).join("")}function o(t){var e=t.r,r=t.g,n=t.b;e/=255,r/=255,n/=255;var o,s,a=Math.max(e,r,n),i=Math.min(e,r,n),l=(a+i)/2;if(a===i)o=s=0;else{var c=a-i;switch(s=l>.5?c/(2-a-i):c/(a+i),a){case e:o=(r-n)/c+(n>r?6:0);break;case r:o=(n-e)/c+2;break;case n:o=(e-r)/c+4}o/=6}return{h:o,s:s,l:l}}function s(t){function e(t,e,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?t+6*(e-t)*r:.5>r?e:2/3>r?t+(e-t)*(2/3-r)*6:t}var r,n,o,s=t.h,a=t.s,i=t.l;if(0===a)r=n=o=i;else{var l=.5>i?i*(1+a):i+a-i*a,c=2*i-l;r=e(c,l,s+1/3),n=e(c,l,s),o=e(c,l,s-1/3)}return{r:Math.round(255*r),g:Math.round(255*n),b:Math.round(255*o)}}e.exports={hex2rgb:r,rgb2hex:n,rgb2hsl:o,hsl2rgb:s,rgb2rgbString:function(t){return"rgb("+[t.r,t.g,t.b].join(",")+")"}}},{}],3:[function(t,e){!function(r){"use strict";function n(t){return function(e,r){return"object"==typeof e&&(r=e,e=null),(null===e||void 0===e)&&(e=(new Date).toString()),r||(r={}),t.call(this,e,r)}}var o=t("./pattern"),s=e.exports={generate:n(function(t,e){return new o(t,e)})};r&&(r.fn.geopattern=n(function(t,e){return this.each(function(){var n=r(this).attr("data-title-sha");n&&(e=r.extend({hash:n},e));var o=s.generate(t,e);r(this).css("background-image",o.toDataUrl())})}))}("undefined"!=typeof jQuery?jQuery:null)},{"./pattern":4}],4:[function(t,e){(function(r){"use strict";function n(t,e,r){return parseInt(t.substr(e,r||1),16)}function o(t,e,r,n,o){var s=parseFloat(t),a=r-e,i=o-n;return(s-e)*i/a+n}function s(t){return t%2===0?j:C}function a(t){return o(t,0,15,A,N)}function i(t){var e=t,r=e/2,n=Math.sin(60*Math.PI/180)*e;return[0,n,r,0,r+e,0,2*e,n,r+e,2*n,r,2*n,0,n].join(",")}function l(t,e){var r=.66*e;return[[0,0,t/2,e-r,t/2,e,0,r,0,0],[t/2,e-r,t,0,t,r,t/2,e,t/2,e-r]].map(function(t){return t.join(",")})}function c(t){return[[t,0,t,3*t],[0,t,3*t,t]]}function h(t){var e=t,r=.33*e;return[r,0,e-r,0,e,r,e,e-r,e-r,e,r,e,0,e-r,0,r,r,0].join(",")}function u(t,e){var r=t/2;return[r,0,t,e,0,e,r,0].join(",")}function f(t,e){return[t/2,0,t,e/2,t/2,e,0,e/2].join(",")}function d(t){return[0,0,t,t,0,t,0,0].join(",")}function p(t,e,r,n,o){var i=d(n),l=a(o[0]),c=s(o[0]),h={stroke:E,"stroke-opacity":S,"fill-opacity":l,fill:c};t.polyline(i,h).transform({translate:[e+n,r],scale:[-1,1]}),t.polyline(i,h).transform({translate:[e+n,r+2*n],scale:[1,-1]}),l=a(o[1]),c=s(o[1]),h={stroke:E,"stroke-opacity":S,"fill-opacity":l,fill:c},t.polyline(i,h).transform({translate:[e+n,r+2*n],scale:[-1,-1]}),t.polyline(i,h).transform({translate:[e+n,r],scale:[1,1]})}function g(t,e,r,n,o){var i=a(o),l=s(o),c=d(n),h={stroke:E,"stroke-opacity":S,"fill-opacity":i,fill:l};t.polyline(c,h).transform({translate:[e,r+n],scale:[1,-1]}),t.polyline(c,h).transform({translate:[e+2*n,r+n],scale:[-1,-1]}),t.polyline(c,h).transform({translate:[e,r+n],scale:[1,1]}),t.polyline(c,h).transform({translate:[e+2*n,r+n],scale:[-1,1]})}function v(t,e){var r=t/2;return[0,0,e,r,0,t,0,0].join(",")}var m=t("extend"),y=t("./color"),w=t("./sha1"),b=t("./svg"),x={baseColor:"#933c3c"},k=["octogons","overlappingCircles","plusSigns","xes","sineWaves","hexagons","overlappingRings","plaid","triangles","squares","concentricCircles","diamonds","tessellation","nestedSquares","mosaicSquares","chevrons"],C="#222",j="#ddd",E="#000",S=.02,A=.02,N=.15,O=e.exports=function(t,e){return this.opts=m({},x,e),this.hash=e.hash||w(t),this.svg=new b,this.generateBackground(),this.generatePattern(),this};O.prototype.toSvg=function(){return this.svg.toString()},O.prototype.toString=function(){return this.toSvg()},O.prototype.toBase64=function(){var t,e=this.toSvg();return t="undefined"!=typeof window&&"function"==typeof window.btoa?window.btoa(e):new r(e).toString("base64")},O.prototype.toDataUri=function(){return"data:image/svg+xml;base64,"+this.toBase64()},O.prototype.toDataUrl=function(){return'url("'+this.toDataUri()+'")'},O.prototype.generateBackground=function(){var t,e,r,s;this.opts.color?r=y.hex2rgb(this.opts.color):(e=o(n(this.hash,14,3),0,4095,0,359),s=n(this.hash,17),t=y.rgb2hsl(y.hex2rgb(this.opts.baseColor)),t.h=(360*t.h-e+360)%360/360,t.s=s%2===0?Math.min(1,(100*t.s+s)/100):Math.max(0,(100*t.s-s)/100),r=y.hsl2rgb(t)),this.color=y.rgb2hex(r),this.svg.rect(0,0,"100%","100%",{fill:y.rgb2rgbString(r)})},O.prototype.generatePattern=function(){var t=this.opts.generator;if(t){if(k.indexOf(t)<0)throw new Error("The generator "+t+" does not exist.")}else t=k[n(this.hash,20)];return this["geo"+t.slice(0,1).toUpperCase()+t.slice(1)]()},O.prototype.geoHexagons=function(){var t,e,r,l,c,h,u,f,d=n(this.hash,0),p=o(d,0,15,8,60),g=p*Math.sqrt(3),v=2*p,m=i(p);for(this.svg.setWidth(3*v+3*p),this.svg.setHeight(6*g),r=0,f=0;6>f;f++)for(u=0;6>u;u++)h=n(this.hash,r),t=u%2===0?f*g:f*g+g/2,l=a(h),e=s(h),c={fill:e,"fill-opacity":l,stroke:E,"stroke-opacity":S},this.svg.polyline(m,c).transform({translate:[u*p*1.5-v/2,t-g/2]}),0===u&&this.svg.polyline(m,c).transform({translate:[6*p*1.5-v/2,t-g/2]}),0===f&&(t=u%2===0?6*g:6*g+g/2,this.svg.polyline(m,c).transform({translate:[u*p*1.5-v/2,t-g/2]})),0===u&&0===f&&this.svg.polyline(m,c).transform({translate:[6*p*1.5-v/2,5*g+g/2]}),r++},O.prototype.geoSineWaves=function(){var t,e,r,i,l,c,h,u=Math.floor(o(n(this.hash,0),0,15,100,400)),f=Math.floor(o(n(this.hash,1),0,15,30,100)),d=Math.floor(o(n(this.hash,2),0,15,3,30));for(this.svg.setWidth(u),this.svg.setHeight(36*d),e=0;36>e;e++)c=n(this.hash,e),r=a(c),t=s(c),h=u/4*.7,l={fill:"none",stroke:t,opacity:r,"stroke-width":""+d+"px"},i="M0 "+f+" C "+h+" 0, "+(u/2-h)+" 0, "+u/2+" "+f+" S "+(u-h)+" "+2*f+", "+u+" "+f+" S "+(1.5*u-h)+" 0, "+1.5*u+", "+f,this.svg.path(i,l).transform({translate:[-u/4,d*e-1.5*f]}),this.svg.path(i,l).transform({translate:[-u/4,d*e-1.5*f+36*d]})},O.prototype.geoChevrons=function(){var t,e,r,i,c,h,u,f=o(n(this.hash,0),0,15,30,80),d=o(n(this.hash,0),0,15,30,80),p=l(f,d);for(this.svg.setWidth(6*f),this.svg.setHeight(6*d*.66),e=0,u=0;6>u;u++)for(h=0;6>h;h++)c=n(this.hash,e),r=a(c),t=s(c),i={stroke:E,"stroke-opacity":S,fill:t,"fill-opacity":r,"stroke-width":1},this.svg.group(i).transform({translate:[h*f,u*d*.66-d/2]}).polyline(p).end(),0===u&&this.svg.group(i).transform({translate:[h*f,6*d*.66-d/2]}).polyline(p).end(),e+=1},O.prototype.geoPlusSigns=function(){var t,e,r,i,l,h,u,f,d=o(n(this.hash,0),0,15,10,25),p=3*d,g=c(d);for(this.svg.setWidth(12*d),this.svg.setHeight(12*d),r=0,f=0;6>f;f++)for(u=0;6>u;u++)h=n(this.hash,r),i=a(h),e=s(h),t=f%2===0?0:1,l={fill:e,stroke:E,"stroke-opacity":S,"fill-opacity":i},this.svg.group(l).transform({translate:[u*p-u*d+t*d-d,f*p-f*d-p/2]}).rect(g).end(),0===u&&this.svg.group(l).transform({translate:[4*p-u*d+t*d-d,f*p-f*d-p/2]}).rect(g).end(),0===f&&this.svg.group(l).transform({translate:[u*p-u*d+t*d-d,4*p-f*d-p/2]}).rect(g).end(),0===u&&0===f&&this.svg.group(l).transform({translate:[4*p-u*d+t*d-d,4*p-f*d-p/2]}).rect(g).end(),r++},O.prototype.geoXes=function(){var t,e,r,i,l,h,u,f,d=o(n(this.hash,0),0,15,10,25),p=c(d),g=3*d*.943;for(this.svg.setWidth(3*g),this.svg.setHeight(3*g),r=0,f=0;6>f;f++)for(u=0;6>u;u++)h=n(this.hash,r),i=a(h),t=u%2===0?f*g-.5*g:f*g-.5*g+g/4,e=s(h),l={fill:e,opacity:i},this.svg.group(l).transform({translate:[u*g/2-g/2,t-f*g/2],rotate:[45,g/2,g/2]}).rect(p).end(),0===u&&this.svg.group(l).transform({translate:[6*g/2-g/2,t-f*g/2],rotate:[45,g/2,g/2]}).rect(p).end(),0===f&&(t=u%2===0?6*g-g/2:6*g-g/2+g/4,this.svg.group(l).transform({translate:[u*g/2-g/2,t-6*g/2],rotate:[45,g/2,g/2]}).rect(p).end()),5===f&&this.svg.group(l).transform({translate:[u*g/2-g/2,t-11*g/2],rotate:[45,g/2,g/2]}).rect(p).end(),0===u&&0===f&&this.svg.group(l).transform({translate:[6*g/2-g/2,t-6*g/2],rotate:[45,g/2,g/2]}).rect(p).end(),r++},O.prototype.geoOverlappingCircles=function(){var t,e,r,i,l,c,h,u=n(this.hash,0),f=o(u,0,15,25,200),d=f/2;for(this.svg.setWidth(6*d),this.svg.setHeight(6*d),e=0,h=0;6>h;h++)for(c=0;6>c;c++)l=n(this.hash,e),r=a(l),t=s(l),i={fill:t,opacity:r},this.svg.circle(c*d,h*d,d,i),0===c&&this.svg.circle(6*d,h*d,d,i),0===h&&this.svg.circle(c*d,6*d,d,i),0===c&&0===h&&this.svg.circle(6*d,6*d,d,i),e++},O.prototype.geoOctogons=function(){var t,e,r,i,l,c,u=o(n(this.hash,0),0,15,10,60),f=h(u);for(this.svg.setWidth(6*u),this.svg.setHeight(6*u),e=0,c=0;6>c;c++)for(l=0;6>l;l++)i=n(this.hash,e),r=a(i),t=s(i),this.svg.polyline(f,{fill:t,"fill-opacity":r,stroke:E,"stroke-opacity":S}).transform({translate:[l*u,c*u]}),e+=1},O.prototype.geoSquares=function(){var t,e,r,i,l,c,h=o(n(this.hash,0),0,15,10,60);for(this.svg.setWidth(6*h),this.svg.setHeight(6*h),e=0,c=0;6>c;c++)for(l=0;6>l;l++)i=n(this.hash,e),r=a(i),t=s(i),this.svg.rect(l*h,c*h,h,h,{fill:t,"fill-opacity":r,stroke:E,"stroke-opacity":S}),e+=1},O.prototype.geoConcentricCircles=function(){var t,e,r,i,l,c,h=n(this.hash,0),u=o(h,0,15,10,60),f=u/5;for(this.svg.setWidth(6*(u+f)),this.svg.setHeight(6*(u+f)),e=0,c=0;6>c;c++)for(l=0;6>l;l++)i=n(this.hash,e),r=a(i),t=s(i),this.svg.circle(l*u+l*f+(u+f)/2,c*u+c*f+(u+f)/2,u/2,{fill:"none",stroke:t,opacity:r,"stroke-width":f+"px"}),i=n(this.hash,39-e),r=a(i),t=s(i),this.svg.circle(l*u+l*f+(u+f)/2,c*u+c*f+(u+f)/2,u/4,{fill:t,"fill-opacity":r}),e+=1},O.prototype.geoOverlappingRings=function(){var t,e,r,i,l,c,h,u=n(this.hash,0),f=o(u,0,15,10,60),d=f/4;for(this.svg.setWidth(6*f),this.svg.setHeight(6*f),e=0,h=0;6>h;h++)for(c=0;6>c;c++)l=n(this.hash,e),r=a(l),t=s(l),i={fill:"none",stroke:t,opacity:r,"stroke-width":d+"px"},this.svg.circle(c*f,h*f,f-d/2,i),0===c&&this.svg.circle(6*f,h*f,f-d/2,i),0===h&&this.svg.circle(c*f,6*f,f-d/2,i),0===c&&0===h&&this.svg.circle(6*f,6*f,f-d/2,i),e+=1},O.prototype.geoTriangles=function(){var t,e,r,i,l,c,h,f,d=n(this.hash,0),p=o(d,0,15,15,80),g=p/2*Math.sqrt(3),v=u(p,g);for(this.svg.setWidth(3*p),this.svg.setHeight(6*g),e=0,f=0;6>f;f++)for(h=0;6>h;h++)c=n(this.hash,e),r=a(c),t=s(c),l={fill:t,"fill-opacity":r,stroke:E,"stroke-opacity":S},i=f%2===0?h%2===0?180:0:h%2!==0?180:0,this.svg.polyline(v,l).transform({translate:[h*p*.5-p/2,g*f],rotate:[i,p/2,g/2]}),0===h&&this.svg.polyline(v,l).transform({translate:[6*p*.5-p/2,g*f],rotate:[i,p/2,g/2]}),e+=1},O.prototype.geoDiamonds=function(){var t,e,r,i,l,c,h,u,d=o(n(this.hash,0),0,15,10,50),p=o(n(this.hash,1),0,15,10,50),g=f(d,p);for(this.svg.setWidth(6*d),this.svg.setHeight(3*p),r=0,u=0;6>u;u++)for(h=0;6>h;h++)c=n(this.hash,r),i=a(c),e=s(c),l={fill:e,"fill-opacity":i,stroke:E,"stroke-opacity":S},t=u%2===0?0:d/2,this.svg.polyline(g,l).transform({translate:[h*d-d/2+t,p/2*u-p/2]}),0===h&&this.svg.polyline(g,l).transform({translate:[6*d-d/2+t,p/2*u-p/2]}),0===u&&this.svg.polyline(g,l).transform({translate:[h*d-d/2+t,p/2*6-p/2]}),0===h&&0===u&&this.svg.polyline(g,l).transform({translate:[6*d-d/2+t,p/2*6-p/2]}),r+=1},O.prototype.geoNestedSquares=function(){var t,e,r,i,l,c,h,u=o(n(this.hash,0),0,15,4,12),f=7*u;for(this.svg.setWidth(6*(f+u)+6*u),this.svg.setHeight(6*(f+u)+6*u),e=0,h=0;6>h;h++)for(c=0;6>c;c++)l=n(this.hash,e),r=a(l),t=s(l),i={fill:"none",stroke:t,opacity:r,"stroke-width":u+"px"},this.svg.rect(c*f+c*u*2+u/2,h*f+h*u*2+u/2,f,f,i),l=n(this.hash,39-e),r=a(l),t=s(l),i={fill:"none",stroke:t,opacity:r,"stroke-width":u+"px"},this.svg.rect(c*f+c*u*2+u/2+2*u,h*f+h*u*2+u/2+2*u,3*u,3*u,i),e+=1},O.prototype.geoMosaicSquares=function(){var t,e,r,s=o(n(this.hash,0),0,15,15,50);for(this.svg.setWidth(8*s),this.svg.setHeight(8*s),t=0,r=0;4>r;r++)for(e=0;4>e;e++)e%2===0?r%2===0?g(this.svg,e*s*2,r*s*2,s,n(this.hash,t)):p(this.svg,e*s*2,r*s*2,s,[n(this.hash,t),n(this.hash,t+1)]):r%2===0?p(this.svg,e*s*2,r*s*2,s,[n(this.hash,t),n(this.hash,t+1)]):g(this.svg,e*s*2,r*s*2,s,n(this.hash,t)),t+=1},O.prototype.geoPlaid=function(){var t,e,r,o,i,l,c,h=0,u=0;for(e=0;36>e;)o=n(this.hash,e),h+=o+5,c=n(this.hash,e+1),r=a(c),t=s(c),i=c+5,this.svg.rect(0,h,"100%",i,{opacity:r,fill:t}),h+=i,e+=2;for(e=0;36>e;)o=n(this.hash,e),u+=o+5,c=n(this.hash,e+1),r=a(c),t=s(c),l=c+5,this.svg.rect(u,0,l,"100%",{opacity:r,fill:t}),u+=l,e+=2;this.svg.setWidth(u),this.svg.setHeight(h)},O.prototype.geoTessellation=function(){var t,e,r,i,l,c=o(n(this.hash,0),0,15,5,40),h=c*Math.sqrt(3),u=2*c,f=c/2*Math.sqrt(3),d=v(c,f),p=3*c+2*f,g=2*h+2*c;for(this.svg.setWidth(p),this.svg.setHeight(g),e=0;20>e;e++)switch(l=n(this.hash,e),r=a(l),t=s(l),i={stroke:E,"stroke-opacity":S,fill:t,"fill-opacity":r,"stroke-width":1},e){case 0:this.svg.rect(-c/2,-c/2,c,c,i),this.svg.rect(p-c/2,-c/2,c,c,i),this.svg.rect(-c/2,g-c/2,c,c,i),this.svg.rect(p-c/2,g-c/2,c,c,i);break;case 1:this.svg.rect(u/2+f,h/2,c,c,i);break;case 2:this.svg.rect(-c/2,g/2-c/2,c,c,i),this.svg.rect(p-c/2,g/2-c/2,c,c,i);

break;case 3:this.svg.rect(u/2+f,1.5*h+c,c,c,i);break;case 4:this.svg.polyline(d,i).transform({translate:[c/2,-c/2],rotate:[0,c/2,f/2]}),this.svg.polyline(d,i).transform({translate:[c/2,g- -c/2],rotate:[0,c/2,f/2],scale:[1,-1]});break;case 5:this.svg.polyline(d,i).transform({translate:[p-c/2,-c/2],rotate:[0,c/2,f/2],scale:[-1,1]}),this.svg.polyline(d,i).transform({translate:[p-c/2,g+c/2],rotate:[0,c/2,f/2],scale:[-1,-1]});break;case 6:this.svg.polyline(d,i).transform({translate:[p/2+c/2,h/2]});break;case 7:this.svg.polyline(d,i).transform({translate:[p-p/2-c/2,h/2],scale:[-1,1]});break;case 8:this.svg.polyline(d,i).transform({translate:[p/2+c/2,g-h/2],scale:[1,-1]});break;case 9:this.svg.polyline(d,i).transform({translate:[p-p/2-c/2,g-h/2],scale:[-1,-1]});break;case 10:this.svg.polyline(d,i).transform({translate:[c/2,g/2-c/2]});break;case 11:this.svg.polyline(d,i).transform({translate:[p-c/2,g/2-c/2],scale:[-1,1]});break;case 12:this.svg.rect(0,0,c,c,i).transform({translate:[c/2,c/2],rotate:[-30,0,0]});break;case 13:this.svg.rect(0,0,c,c,i).transform({scale:[-1,1],translate:[-p+c/2,c/2],rotate:[-30,0,0]});break;case 14:this.svg.rect(0,0,c,c,i).transform({translate:[c/2,g/2-c/2-c],rotate:[30,0,c]});break;case 15:this.svg.rect(0,0,c,c,i).transform({scale:[-1,1],translate:[-p+c/2,g/2-c/2-c],rotate:[30,0,c]});break;case 16:this.svg.rect(0,0,c,c,i).transform({scale:[1,-1],translate:[c/2,-g+g/2-c/2-c],rotate:[30,0,c]});break;case 17:this.svg.rect(0,0,c,c,i).transform({scale:[-1,-1],translate:[-p+c/2,-g+g/2-c/2-c],rotate:[30,0,c]});break;case 18:this.svg.rect(0,0,c,c,i).transform({scale:[1,-1],translate:[c/2,-g+c/2],rotate:[-30,0,0]});break;case 19:this.svg.rect(0,0,c,c,i).transform({scale:[-1,-1],translate:[-p+c/2,-g+c/2],rotate:[-30,0,0]})}}}).call(this,t("buffer").Buffer)},{"./color":2,"./sha1":5,"./svg":6,buffer:8,extend:9}],5:[function(t,e){"use strict";function r(){function t(){for(var t=16;80>t;t++){var e=u[t-3]^u[t-8]^u[t-14]^u[t-16];u[t]=e<<1|e>>>31}var r,n,o=a,s=i,d=l,p=c,g=h;for(t=0;80>t;t++){20>t?(r=p^s&(d^p),n=1518500249):40>t?(r=s^d^p,n=1859775393):60>t?(r=s&d|p&(s|d),n=2400959708):(r=s^d^p,n=3395469782);var v=(o<<5|o>>>27)+r+g+n+(0|u[t]);g=p,p=d,d=s<<30|s>>>2,s=o,o=v}for(a=a+o|0,i=i+s|0,l=l+d|0,c=c+p|0,h=h+g|0,f=0,t=0;16>t;t++)u[t]=0}function e(e){u[f]|=(255&e)<<d,d?d-=8:(f++,d=24),16===f&&t()}function r(t){var r=t.length;p+=8*r;for(var n=0;r>n;n++)e(t.charCodeAt(n))}function n(t){if("string"==typeof t)return r(t);var n=t.length;p+=8*n;for(var o=0;n>o;o++)e(t[o])}function o(t){for(var e="",r=28;r>=0;r-=4)e+=(t>>r&15).toString(16);return e}function s(){e(128),(f>14||14===f&&24>d)&&t(),f=14,d=24,e(0),e(0),e(p>0xffffffffff?p/1099511627776:0),e(p>4294967295?p/4294967296:0);for(var r=24;r>=0;r-=8)e(p>>r);return o(a)+o(i)+o(l)+o(c)+o(h)}var a=1732584193,i=4023233417,l=2562383102,c=271733878,h=3285377520,u=new Uint32Array(80),f=0,d=24,p=0;return{update:n,digest:s}}e.exports=function(t){if(void 0===t)return r();var e=r();return e.update(t),e.digest()}},{}],6:[function(t,e){"use strict";function r(){return this.width=100,this.height=100,this.svg=new o("svg"),this.context=[],this.setAttributes(this.svg,{xmlns:"http://www.w3.org/2000/svg",width:this.width,height:this.height}),this}var n=t("extend"),o=t("./xml");e.exports=r,r.prototype.currentContext=function(){return this.context[this.context.length-1]||this.svg},r.prototype.end=function(){return this.context.pop(),this},r.prototype.currentNode=function(){var t=this.currentContext();return t.lastChild||t},r.prototype.transform=function(t){return this.currentNode().setAttribute("transform",Object.keys(t).map(function(e){return e+"("+t[e].join(",")+")"}).join(" ")),this},r.prototype.setAttributes=function(t,e){Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])})},r.prototype.setWidth=function(t){this.svg.setAttribute("width",Math.floor(t))},r.prototype.setHeight=function(t){this.svg.setAttribute("height",Math.floor(t))},r.prototype.toString=function(){return this.svg.toString()},r.prototype.rect=function(t,e,r,s,a){var i=this;if(Array.isArray(t))return t.forEach(function(t){i.rect.apply(i,t.concat(a))}),this;var l=new o("rect");return this.currentContext().appendChild(l),this.setAttributes(l,n({x:t,y:e,width:r,height:s},a)),this},r.prototype.circle=function(t,e,r,s){var a=new o("circle");return this.currentContext().appendChild(a),this.setAttributes(a,n({cx:t,cy:e,r:r},s)),this},r.prototype.path=function(t,e){var r=new o("path");return this.currentContext().appendChild(r),this.setAttributes(r,n({d:t},e)),this},r.prototype.polyline=function(t,e){var r=this;if(Array.isArray(t))return t.forEach(function(t){r.polyline(t,e)}),this;var s=new o("polyline");return this.currentContext().appendChild(s),this.setAttributes(s,n({points:t},e)),this},r.prototype.group=function(t){var e=new o("g");return this.currentContext().appendChild(e),this.context.push(e),this.setAttributes(e,n({},t)),this}},{"./xml":7,extend:9}],7:[function(t,e){"use strict";var r=e.exports=function(t){return this instanceof r?(this.tagName=t,this.attributes=Object.create(null),this.children=[],this.lastChild=null,this):new r(t)};r.prototype.appendChild=function(t){return this.children.push(t),this.lastChild=t,this},r.prototype.setAttribute=function(t,e){return this.attributes[t]=e,this},r.prototype.toString=function(){var t=this;return["<",t.tagName,Object.keys(t.attributes).map(function(e){return[" ",e,'="',t.attributes[e],'"'].join("")}).join(""),">",t.children.map(function(t){return t.toString()}).join(""),"</",t.tagName,">"].join("")}},{}],8:[function(){},{}],9:[function(t,e){function r(t){if(!t||"[object Object]"!==o.call(t)||t.nodeType||t.setInterval)return!1;var e=n.call(t,"constructor"),r=n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!r)return!1;var s;for(s in t);return void 0===s||n.call(t,s)}var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString;e.exports=function s(){var t,e,n,o,a,i,l=arguments[0]||{},c=1,h=arguments.length,u=!1;for("boolean"==typeof l&&(u=l,l=arguments[1]||{},c=2),"object"!=typeof l&&"function"!=typeof l&&(l={});h>c;c++)if(null!=(t=arguments[c]))for(e in t)n=l[e],o=t[e],l!==o&&(u&&o&&(r(o)||(a=Array.isArray(o)))?(a?(a=!1,i=n&&Array.isArray(n)?n:[]):i=n&&r(n)?n:{},l[e]=s(u,i,o)):void 0!==o&&(l[e]=o));return l}},{}]},{},[1])(1)});